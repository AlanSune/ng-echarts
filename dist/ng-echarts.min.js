angular.module("ng-echarts",[]).directive("ngEcharts",[function(){return{link:function(o,n,i,t){function e(){var i=echarts.getInstanceByDom(n[0]);if(!i){var t=o.config&&o.config.theme?o.config.theme:"default";i=echarts.init(n[0],t),window.addEventListener("resize",function(o){i.resize()},!1)}o.config&&o.config.dataLoaded===!1&&i.showLoading(),o.config&&o.config.dataLoaded&&(o.config.error||o.config.noData?(o.option.xAxis?o.option.xAxis.show=!1:o.option.xAxis={show:!1},o.option.yAxis?o.option.yAxis.show=!1:o.option.yAxis={show:!1},o.option.legend?o.option.legend.show=!1:o.option.legend={show:!1},o.option.series&&(o.option.series=[]),o.option.graphic={type:"text",left:"center",top:"center",z:100,style:{text:o.config.error?"数据获取失败":"暂无数据",font:"bold 1em Microsoft YaHei"}}):(o.option.xAxis&&(o.option.xAxis.show=!0),o.option.yAxis&&(o.option.yAxis.show=!0),o.option.legend&&(o.option.legend.show=!0),o.option.graphic&&(o.option.graphic.invisible=!0)),i.setOption(o.option),i.resize(),i.hideLoading()),o.config&&o.config.event&&angular.isArray(o.config.event)&&angular.forEach(o.config.event,function(o,n){for(var t in o)i.on(t,o[t])})}o.$watch(function(){return o.config},function(o){o&&e()},!0),o.$watch(function(){return o.option},function(o){o&&e()},!0)},scope:{option:"=ecOption",config:"=ecConfig"},restrict:"EA"}}]);